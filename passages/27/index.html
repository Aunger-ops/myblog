<!-- build time:Thu May 28 2020 12:06:29 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="PHP,Laravel,Python,API,RestFulAPI,å¤§æ•°æ®,åç«¯,Aunger&#39;s Blog,Aunger" name="keywords"><meta content="NodeMCUä½œä¸ºæˆç†Ÿçš„ESP8266æ¨¡å—å¹³å°ï¼Œå†…å­˜æº¢å‡ºï¼Œå†…å­˜ä¸è¶³æ˜¯å…¶æœ€å¤§çš„ç¼ºç‚¹ã€‚æœ¬æ–‡æŒ‡å‡ºä¸€äº›æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå¯¹NodeMCUå†…å­˜æº¢å‡ºçš„è§£å†³æ–¹æ¡ˆã€‚Aunger&#39;s Blog æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ã€‚æœ¬åšå®¢ä¼šç»å¸¸æ›´æ–°æ¶‰åŠPHP,Python,C,51å•ç‰‡æœº,Laravel,linux,æ˜“è¯­è¨€,å‰ç«¯,åç«¯ç­‰æŠ€æœ¯æ€§å­¦æœ¯æ–‡ç« !" name="description"><meta content="width=device-width,initial-scale=1,maximum-scale=1" name="viewport"><title>NodeMCU å†…å­˜æ ˆä¸è¶³è§£å†³ğŸš€ - Geek Designer</title><link href="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/favicon.ico" rel="shortcut icon"><link rel="stylesheet" href="/./css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/fancybox/jquery.fancybox.min.css"><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/pace.min.js"></script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Geek Designer" type="application/atom+xml"></head></html><body><main class="content"><section class="outer"><article id="post-27" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">NodeMCU å†…å­˜æ ˆä¸è¶³è§£å†³ğŸš€</h1></header><div class="article-meta"><a href="/passages/27/" class="article-date"><time datetime="2020-05-28T02:56:06.000Z" itemprop="datePublished">2020-05-28</time></a></div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><p>NodeMCUä½œä¸ºæˆç†Ÿçš„ESP8266æ¨¡å—å¹³å°ï¼Œå†…å­˜æº¢å‡ºï¼Œå†…å­˜ä¸è¶³æ˜¯å…¶æœ€å¤§çš„ç¼ºç‚¹ã€‚æœ¬æ–‡æŒ‡å‡ºä¸€äº›æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå¯¹NodeMCUå†…å­˜æº¢å‡ºçš„è§£å†³æ–¹æ¡ˆã€‚</p><a id="more"></a><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>é¿å…å‡ºç°å†…å­˜æº¢å‡ºæƒ…å†µï¼Œè¦æ³¨æ„ï¼š</p><ol><li>å†—ä½™çš„å˜é‡åŠæ—¶èµ‹å€¼<code>nil</code>æ³¨é”€ã€‚</li></ol><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extra = <span class="literal">nil</span></span><br></pre></td></tr></table></figure><ol start="2"><li>éœ€è¦æ—¶é—´æ‰§è¡Œçš„ç¨‹åºï¼Œå»¶æ—¶ä¸€æ®µæ—¶é—´å†å¾€ä¸‹æ‰§è¡Œ<br>å¦‚è§£å†³ httpserver ä¸­ Out Of Memory</li></ol><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">wifi.setmode(wifi.STATION)</span><br><span class="line">wifi.sta.<span class="built_in">config</span>(&#123;ssid,passwd&#125;)</span><br><span class="line">wifi.sta.autoconnect(<span class="number">1</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startserver</span><span class="params">()</span></span></span><br><span class="line">    srv = net.createServer(net.TCP)</span><br><span class="line">    srv:listen(<span class="number">80</span>, <span class="function"><span class="keyword">function</span><span class="params">(conn)</span></span></span><br><span class="line">        ......</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">tmr.<span class="built_in">create</span>():alarm(<span class="number">1000</span>,<span class="number">1</span>,<span class="function"><span class="keyword">function</span><span class="params">(cb_timer)</span></span></span><br><span class="line">    <span class="keyword">if</span> wifi.sta.getip() == <span class="literal">nil</span> <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Connecting..."</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cb_timer:unregister()</span><br><span class="line">        tmr.<span class="built_in">create</span>():alarm(<span class="number">1000</span>,tmr.ALARM_SINGLE,start_server)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li><p>é¿å…å›è°ƒå‡½æ•°æ„æˆå®Œç¾é—­åŒ…å¾ªç¯ï¼Œç”±äºæ— æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå› æ­¤ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p></li><li><p>ä½¿ç”¨netæ¨¡å—æ—¶ï¼Œä¸åº”è¯¥åœ¨å›è°ƒä¸­å…³é—­è¿æ¥ã€‚</p></li><li><p>ç¼–è¯‘å›ºä»¶æ—¶ï¼Œé€‰æ‹©è‡ªå·±æ‰€éœ€è¦ç”¨åˆ°çš„æ¨¡å—ï¼Œå‡å°‘å›ºä»¶æ‰€è€—å†…å­˜ã€‚</p></li><li><p>è®¤çœŸç¢ç£¨ä»£ç é€»è¾‘ï¼Œå‡å°‘å¤šä½™æ“ä½œï¼Œä¼˜åŒ–ä»£ç ç»“æ„ã€‚</p></li></ol><h2 id="ç›‘æµ‹"><a href="#ç›‘æµ‹" class="headerlink" title="ç›‘æµ‹"></a>ç›‘æµ‹</h2><p>ä½¿ç”¨<code>node.heap()</code>åŠæ—¶å¯¹å†…å­˜é—®é¢˜è¿›è¡Œç›‘æµ‹ï¼Œæ‰¾å‡ºå†…å­˜æº¢å‡ºé—®é¢˜æ‰€åœ¨ã€‚</p><p>å¦‚ï¼šåœ¨ä»£ç ä¸­å®æ—¶æ‰“å°<code>node.heap()</code></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">heap0=<span class="number">0</span></span><br><span class="line">heap1=<span class="number">0</span></span><br><span class="line">heap0=node.heap()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line">Â·Â·Â·Â·</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">heap1=node.heap()</span><br><span class="line"><span class="comment">--heap0 å¼€å§‹å†…å­˜å€¼</span></span><br><span class="line"><span class="comment">--heap1 ç»“æŸå†…å­˜å€¼</span></span><br><span class="line"><span class="comment">--heap0-heap1 æ‰€å ç”¨å†…å­˜å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'@heap'</span>,heap0,heap1,heap0-heap1)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@heap 40576 40048 528</span><br></pre></td></tr></table></figure></div><div class="links" align="middle"><a id="btn_donate" class="bmc-button bmcButton" href="javascript:;"><img alt="Buy me a coffee" src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg"> <span style="margin-left:15px;font-size:18px!important">Buy me a coffee</span></a><script type="text/javascript">document.getElementById("btn_donate").onclick=function(){$("#donate_board").addClass("hidden"),$("#donate_guide").removeClass("hidden")}</script></div><div id="donate_guide" class="donate_bar center hidden"><img src="/images/Alipay.jpg" alt="æ”¯ä»˜å®æ‰“èµ"> <img src="/images/WeChatpay.jpg" alt="å¾®ä¿¡æ‰“èµ"></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>ä½œè€…: </strong>Aunger</li><li class="post-copyright-link"><strong>æ–‡ç« é“¾æ¥: </strong><a href="/passages/27/" target="_blank" title="NodeMCU å†…å­˜æ ˆä¸è¶³è§£å†³ğŸš€">https://www.webaun.cn/passages/27/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜: </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–,å‡é‡‡ç”¨ <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</li></ul><div></div></div><footer class="article-footer"><a data-url="https://www.webaun.cn/passages/27/" data-id="ckaq91vf90000l4ux8d1j8l13" class="article-share-link">Share</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeMCU/" rel="tag">NodeMCU</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" rel="tag">åµŒå…¥å¼</a></li></ul></footer></div><nav class="article-nav"><a href="/passages/26/" class="article-nav-link"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">NodeMCU ä¼ é€16è¿›åˆ¶ä¿¡æ¯</div></a></nav><div class="gitalk" id="gitalk-container"></div><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"e6637aa75b71f443a50e",clientSecret:"2fcf9724afcf5468626ae968ad188f55890ecbde",repo:"myblog",owner:"Aunger-ops",admin:["Aunger-ops"],id:md5(location.pathname),distractionFreeMode:!1,pagerDirection:"last"});gitalk.render("gitalk-container")</script></article></section><footer class="footer"><div class="outer"><div class="float-right"><ul class="list-inline"><li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li><li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li></ul></div><ul class="list-inline"><li>&copy; 2020 Geek Designer <a target="_blank" href="http://miitbeian.gov.cn" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><p style="height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">ç²¤ICPå¤‡20026716å·</p></a><br><a target="_blank" href="http://www.beian.gov.cn/" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><img src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/images/beian.png" style="float:left;width:20px;height:20px"><p style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">ç²¤å…¬ç½‘å®‰å¤‡ 44060602001553å·</p></a></li></ul></div></footer></main><aside class="sidebar"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/images/gen.svg" alt="Geek Designer"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">é¦–é¡µ</a></li><li class="nav-item"><a class="nav-item-link" href="/archives">å½’æ¡£</a></li><li class="nav-item"><a class="nav-item-link" href="/gallery">ç›¸å†Œ</a></li><li class="nav-item"><a class="nav-item-link" href="/about">å…³äº</a></li><li class="nav-item"><a class="nav-item-link" href="/friends">å‹è”</a></li><li class="nav-item"><a class="nav-item-link" href="https://github.com/Aunger-ops" target="_blank" rel="noopener">ä½œå“</a></li><li class="nav-item"><a class="nav-item-link nav-item-search" title="Search"><i class="fe fe-search"></i> æœç´¢</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><div class="totop" id="totop"><i class="fe fe-rocket"></i></div></li><li class="nav-item"><a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed"><i class="fe fe-feed"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/jquery-2.0.3.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/jquery.justifiedGallery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/lazyload.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/busuanzi-2.3.pure.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/fancybox/jquery.fancybox.min.js"></script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/tocbot.min.js"></script><script>tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="https://cdn.jsdelivr.net/gh/Aunger-ops/myblog@latest/js/ocean.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?fe34b9a1ed05edfef1b30971cd3517ee";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(t){function n(){for(var n=0;n<e.length;n++)i=e[n],0<=(o=i.getBoundingClientRect()).bottom&&0<=o.left&&o.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,i,o,r,c=e[n];t=c,i=function(){e=e.filter(function(t){return c!==t})},o=new Image,r=t.getAttribute("data-original"),o.onload=function(){t.src=r,i&&i()},o.src=r}();var i,o}var e=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));n(),t.addEventListener("scroll",function(){var e,i;e=n,i=t,clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(i)},500)})}(this)</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script></body><!-- rebuild by neat -->